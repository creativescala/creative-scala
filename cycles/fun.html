<!doctype html>
<html lang="">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Laika 0.19.0" />
    <title>Fun with Composition</title>
    
    
    <meta name="description" content="book" />
    
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400|Source+Sans+Pro:300,400,600"
        rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Crimson+Pro:400" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="../creative-scala.css" />
    <script src="../toc.js"></script>
    <script src="../solution.js"></script>
    <script src="../main.js"></script>
    <script> /* for avoiding page load transitions */</script>
</head>

<body>
    <nav id="topbar"><p><a href="composition.html">←</a></p>
<p><a href="../../">Creative Scala: Form and Function</a></p>
<p><a href="interpolation.html">→</a></p></nav>
    <nav id="sidebar">
        <ul class="nav-list">
          <li class="level1 nav-leaf"><a href="../">Creative Scala: Form and Function</a></li>
          <li class="level1 nav-leaf"><a href="../foreword-1.html">Foreword to the First Edition</a></li>
          <li class="level1 nav-leaf"><a href="../foreword-2.html">Foreword to the Second Edition</a></li>
          <li class="level1 nav-node"><a href="../setup/">Getting Started</a></li>
          <li class="level2 nav-leaf"><a href="../setup/background.html">Background</a></li>
          <li class="level2 nav-leaf"><a href="../setup/terminal.html">Installing Terminal Software and a Text Editor</a></li>
          <li class="level2 nav-leaf"><a href="../setup/github.html">GitHub</a></li>
          <li class="level2 nav-leaf"><a href="../setup/intellij.html">IntelliJ</a></li>
          <li class="level2 nav-leaf"><a href="../setup/">Setup</a></li>
          <li class="level1 nav-node"><a href="../expressions/">Expressions, Values, and Types</a></li>
          <li class="level2 nav-leaf"><a href="../expressions/02-starting.html">Starting to Program</a></li>
          <li class="level2 nav-leaf"><a href="../expressions/03-expressions.html">Expressions and Values</a></li>
          <li class="level2 nav-leaf"><a href="../expressions/04-types.html">Types</a></li>
          <li class="level2 nav-leaf"><a href="../expressions/05-exercises.html">Exercises</a></li>
          <li class="level2 nav-leaf"><a href="../expressions/06-summary.html">Summary</a></li>
          <li class="level1 nav-node"><a href="../expanding-expressions/">Expanding Expressions</a></li>
          <li class="level2 nav-leaf"><a href="../expanding-expressions/02-literals.html">Literal Expressions</a></li>
          <li class="level2 nav-leaf"><a href="../expanding-expressions/03-objects.html">Values are Objects</a></li>
          <li class="level2 nav-leaf"><a href="../expanding-expressions/04-types.html">Types</a></li>
          <li class="level2 nav-leaf"><a href="../expanding-expressions/exercises.html">Exercises</a></li>
          <li class="level2 nav-leaf"><a href="../expanding-expressions/04-images.html">Images</a></li>
          <li class="level1 nav-node"><a href="../expressive-expressions/">Expressive Expressions</a></li>
          <li class="level2 nav-leaf"><a href="../expressive-expressions/02-layout.html">Layout</a></li>
          <li class="level2 nav-leaf"><a href="../expressive-expressions/03-color.html">Color</a></li>
          <li class="level2 nav-leaf"><a href="../expressive-expressions/04-creating-color.html">Creating Colors</a></li>
          <li class="level1 nav-node"><a href="../programs/">Writing Larger Programs</a></li>
          <li class="level2 nav-leaf"><a href="../programs/console.html">Working Within the Console</a></li>
          <li class="level2 nav-leaf"><a href="../programs/outside-console.html">Working Without Worksheets</a></li>
          <li class="level2 nav-leaf"><a href="../programs/names.html">Names</a></li>
          <li class="level2 nav-leaf"><a href="../programs/abstraction.html">Abstraction</a></li>
          <li class="level2 nav-leaf"><a href="../programs/imports.html">Packages and Imports</a></li>
          <li class="level1 nav-node"><a href="../substitution/">The Substitution Model of Evaluation</a></li>
          <li class="level2 nav-leaf"><a href="../substitution/substitution.html">Substitution</a></li>
          <li class="level2 nav-leaf"><a href="../substitution/order.html">Order of Evaluation</a></li>
          <li class="level2 nav-leaf"><a href="../substitution/local-reasoning.html">Local Reasoning</a></li>
          <li class="level1 nav-node"><a href="../methods/">Methods without Madness</a></li>
          <li class="level2 nav-leaf"><a href="../methods/methods.html">Methods</a></li>
          <li class="level2 nav-leaf"><a href="../methods/syntax.html">Method Syntax</a></li>
          <li class="level2 nav-leaf"><a href="../methods/semantics.html">Method Semantics</a></li>
          <li class="level2 nav-leaf"><a href="../methods/writing-methods.html">Writing Methods</a></li>
          <li class="level2 nav-leaf"><a href="../methods/conclusions.html">Conclusions</a></li>
          <li class="level1 nav-node"><a href="../recursion/">Structural Recursion over the Natural Numbers</a></li>
          <li class="level2 nav-leaf"><a href="../recursion/boxes.html">A Line of Boxes</a></li>
          <li class="level2 nav-leaf"><a href="../recursion/natural-numbers.html">The Natural Numbers</a></li>
          <li class="level2 nav-leaf"><a href="../recursion/match.html">Match Expressions</a></li>
          <li class="level2 nav-leaf"><a href="../recursion/substitution.html">Reasoning about Recursion</a></li>
          <li class="level2 nav-leaf"><a href="../recursion/conclusions.html">Conclusions</a></li>
          <li class="level1 nav-node"><a href="../fractals/">Fractals</a></li>
          <li class="level2 nav-leaf"><a href="../fractals/fractals.html">The Chessboard</a></li>
          <li class="level2 nav-leaf"><a href="../fractals/nested-methods.html">Nested Methods</a></li>
          <li class="level2 nav-leaf"><a href="../fractals/auxillary-parameter.html">Auxiliary Parameters</a></li>
          <li class="level2 nav-leaf"><a href="../fractals/exercises.html">Exercises</a></li>
          <li class="level1 nav-node"><a href="../polygons/">Points, Paths, and Polygons</a></li>
          <li class="level2 nav-leaf"><a href="../polygons/02-polar.html">Polar Coordinates</a></li>
          <li class="level2 nav-leaf"><a href="../polygons/03-path.html">Paths</a></li>
          <li class="level2 nav-leaf"><a href="../polygons/04-creative.html">Going Further</a></li>
          <li class="level2 nav-leaf"><a href="../polygons/05-conclusions.html">Conclusions</a></li>
          <li class="level1 nav-node"><a href="../flowers/">Functions and Flowers</a></li>
          <li class="level2 nav-leaf"><a href="../flowers/functions.html">Functions as Abstractions</a></li>
          <li class="level2 nav-leaf"><a href="../flowers/fun.html">Fun with Functions</a></li>
          <li class="level2 nav-leaf"><a href="../flowers/parametric-curves.html">Parametric Curves</a></li>
          <li class="level2 nav-leaf"><a href="../flowers/flowers.html">Flowers and Other Curves</a></li>
          <li class="level2 nav-leaf"><a href="../flowers/conclusions.html">Conclusions</a></li>
          <li class="level1 nav-node"><a href="index.html">Composition and Cycles</a></li>
          <li class="level2 nav-leaf"><a href="composition.html">Function Composition</a></li>
          <li class="level2 active nav-leaf"><a href="#">Fun with Composition</a></li>
          <li class="level2 nav-leaf"><a href="interpolation.html">Interpolation</a></li>
          <li class="level2 nav-leaf"><a href="epicycles.html">Epicycles</a></li>
          <li class="level2 nav-leaf"><a href="culmination.html">Bringing it Together</a></li>
          <li class="level2 nav-leaf"><a href="conclusions.html">Conclusions</a></li>
          <li class="level1 nav-leaf"><a href="../links.html">links.md</a></li>
          <li class="level1 nav-header">collections</li>
          <li class="level2 nav-leaf"><a href="../collections/take-home-points.html">Take Home Points</a></li>
          <li class="level2 nav-leaf"><a href="../collections/create.html">Creating Sequences</a></li>
          <li class="level2 nav-leaf"><a href="../collections/paths.html">Drawing Paths</a></li>
          <li class="level2 nav-leaf"><a href="../collections/">Collections {#collections}</a></li>
          <li class="level2 nav-leaf"><a href="../collections/transform.html">Transforming Sequences</a></li>
          <li class="level1 nav-header">data</li>
          <li class="level2 nav-leaf"><a href="../data/case-classes.html">Case Classes</a></li>
          <li class="level2 nav-leaf"><a href="../data/">Creating and Working With Data</a></li>
          <li class="level2 nav-leaf"><a href="../data/data.html">Data</a></li>
          <li class="level1 nav-header">turtles</li>
          <li class="level2 nav-leaf"><a href="../turtles/branching.html">Branching Structures</a></li>
          <li class="level2 nav-leaf"><a href="../turtles/turtles.html">Controlling the Turtle</a></li>
          <li class="level2 nav-leaf"><a href="../turtles/exercises.html">Exercises</a></li>
          <li class="level2 nav-leaf"><a href="../turtles/">Turtle Algebra and Algebraic Data Types</a></li>
          <li class="level1 nav-header">fp</li>
          <li class="level2 nav-leaf"><a href="../fp/take-home-points.html">Take Home Points</a></li>
          <li class="level2 nav-leaf"><a href="../fp/functions.html">Functions as Values</a></li>
          <li class="level2 nav-leaf"><a href="../fp/recursion.html">Recursive Algorithms</a></li>
          <li class="level2 nav-leaf"><a href="../fp/">(Functional) Programming</a></li>
          <li class="level1 nav-header">generative</li>
          <li class="level2 nav-leaf"><a href="../generative/flatmap.html">Combining Random Values</a></li>
          <li class="level2 nav-leaf"><a href="../generative/random.html">Randomness without Effect</a></li>
          <li class="level2 nav-leaf"><a href="../generative/exercises.html">Exercises</a></li>
          <li class="level2 nav-leaf"><a href="../generative/generative.html">Generative Art</a></li>
          <li class="level2 nav-leaf"><a href="../generative/">Composition of Generative Art</a></li>
          <li class="level2 nav-leaf"><a href="../generative/for.html">For Comprehensions</a></li>
          <li class="level2 nav-leaf"><a href="../generative/api.html">Exploring Random</a></li>
          <li class="level2 nav-leaf"><a href="../generative/product.html">Combining Random Values</a></li>
          <li class="level1 nav-header">declarations</li>
          <li class="level2 nav-leaf"><a href="../declarations/method-declarations.html">Method Declarations</a></li>
          <li class="level2 nav-leaf"><a href="../declarations/take-home-points.html">Take Home Points</a></li>
          <li class="level2 nav-leaf"><a href="../declarations/">Declarations</a></li>
          <li class="level2 nav-leaf"><a href="../declarations/color-palette.html">Extended Exercise: Color Palettes</a></li>
          <li class="level2 nav-leaf"><a href="../declarations/value-declarations.html">Value Declarations</a></li>
          <li class="level1 nav-header">sequences</li>
          <li class="level2 nav-leaf"><a href="../sequences/map.html">Transforming Sequences</a></li>
          <li class="level2 nav-leaf"><a href="../sequences/lists.html">Working with Lists</a></li>
          <li class="level2 nav-leaf"><a href="../sequences/paths.html">Paths</a></li>
          <li class="level2 nav-leaf"><a href="../sequences/stars.html">My God, It&#39;s Full of Stars!</a></li>
          <li class="level2 nav-leaf"><a href="../sequences/">Shapes, Sequences, and Stars</a></li>
          <li class="level1 nav-header">animation</li>
          <li class="level2 nav-leaf"><a href="../animation/easing.html">Easing Functions</a></li>
          <li class="level2 nav-leaf"><a href="../animation/reactor.html">Reactors</a></li>
          <li class="level2 nav-leaf"><a href="../animation/">Animation and Fireworks</a></li>
          <li class="level1 nav-header">summary</li>
          <li class="level2 nav-leaf"><a href="../summary/">Summary</a></li>
          <li class="level1 nav-leaf"><a href="../solutions.html">Solutions to Exercises {#solutions}</a></li>
          <li class="level1 nav-leaf"><a href="../intro.html">Introduction</a></li>
          <li class="level1 nav-header">quickreference</li>
          <li class="level2 nav-leaf"><a href="../quickreference/">Syntax Quick Reference {#syntax-quick-reference}</a></li>
          <li class="level1 nav-header">adt</li>
          <li class="level2 nav-leaf"><a href="../adt/">Algebraic Data Types To Call Our Own</a></li>
          <li class="level2 nav-leaf"><a href="../adt/adt.html">Algebraic Data Types</a></li>
          <li class="level2 nav-leaf"><a href="../adt/turtle.html">Build Your Own Turtle</a></li>
        </ul>
    </nav>

    <div id="content">
        <main class="content">
            <h1 id="fun-with-composition" class="title">Fun with Composition</h1>
            <p>We can do a lot with composition. Let&#39;s see another example that shows a bit more of its power. Remember the concentric circles exercise we used as an example:</p>
            <pre><code class="nohighlight"><span class="keyword">def</span><span> </span><span class="declaration-name">concentricCircles</span><span>(</span><span class="identifier">count</span><span>: </span><span class="type-name">Int</span><span>, </span><span class="identifier">size</span><span>: </span><span class="type-name">Int</span><span>): </span><span class="type-name">Image</span><span> =
  </span><span class="identifier">count</span><span> </span><span class="keyword">match</span><span> {
    </span><span class="keyword">case</span><span> </span><span class="number-literal">0</span><span> =&gt; </span><span class="type-name">Image</span><span>.</span><span class="identifier">empty</span><span>
    </span><span class="keyword">case</span><span> </span><span class="identifier">n</span><span> =&gt; </span><span class="type-name">Image</span><span>.</span><span class="identifier">circle</span><span>(</span><span class="identifier">size</span><span>).</span><span class="identifier">on</span><span>(</span><span class="identifier">concentricCircles</span><span>(</span><span class="identifier">n</span><span>-</span><span class="number-literal">1</span><span>, </span><span class="identifier">size</span><span> + </span><span class="number-literal">10</span><span>))
  }</span></code></pre>
            <p>This pattern allows us to create many different images
            by changing the use of <code>Image.circle</code> to another shape.
            However, each time we provide a new replacement for <code>Image.circle</code>,
            we also need a new definition of <code>concentricCircles</code> to go with it.</p>
            <p>We can make <code>concentricCircles</code> completely general by supplying
            the replacement for <code>Image.circle</code> as a parameter.
            Here we&#39;ve renamed the method to <code>concentricShapes</code>, as we&#39;re no longer restricted to drawing circles,
            and made the <code>singleShape</code> parameter responsible for drawing an appropriately sized shape.</p>
            <pre><code class="nohighlight"><span class="keyword">def</span><span> </span><span class="declaration-name">concentricShapes</span><span>(</span><span class="identifier">count</span><span>: </span><span class="type-name">Int</span><span>, </span><span class="identifier">singleShape</span><span>: </span><span class="type-name">Int</span><span> =&gt; </span><span class="type-name">Image</span><span>): </span><span class="type-name">Image</span><span> =
  </span><span class="identifier">count</span><span> </span><span class="keyword">match</span><span> {
    </span><span class="keyword">case</span><span> </span><span class="number-literal">0</span><span> =&gt; </span><span class="type-name">Image</span><span>.</span><span class="identifier">empty</span><span>
    </span><span class="keyword">case</span><span> </span><span class="identifier">n</span><span> =&gt; </span><span class="identifier">singleShape</span><span>(</span><span class="identifier">n</span><span>).</span><span class="identifier">on</span><span>(</span><span class="identifier">concentricShapes</span><span>(</span><span class="identifier">n</span><span>-</span><span class="number-literal">1</span><span>, </span><span class="identifier">singleShape</span><span>))
  }</span></code></pre>
            <p>Now we can re-use the same definition of <code>concentricShapes</code>
            to produce plain circles, squares of different hue,
            circles with different opacity, and so on.
            All we have to do is pass in a suitable definition of <code>singleShape</code>:</p>
            <pre><code class="nohighlight"><span class="comment">// Passing a function literal directly:
</span><span class="keyword">val</span><span> </span><span class="identifier">blackCircles</span><span>: </span><span class="type-name">Image</span><span> =
  </span><span class="identifier">concentricShapes</span><span>(</span><span class="number-literal">10</span><span>, (</span><span class="identifier">n</span><span>: </span><span class="type-name">Int</span><span>) =&gt; </span><span class="type-name">Image</span><span>.</span><span class="identifier">circle</span><span>(</span><span class="number-literal">100</span><span> + </span><span class="number-literal">24</span><span>*</span><span class="identifier">n</span><span>))

</span><span class="comment">// Converting a method to a function:
</span><span class="keyword">def</span><span> </span><span class="declaration-name">redCircle</span><span>(</span><span class="identifier">n</span><span>: </span><span class="type-name">Int</span><span>): </span><span class="type-name">Image</span><span> =
  </span><span class="type-name">Image</span><span>.</span><span class="identifier">circle</span><span>(</span><span class="number-literal">100</span><span> + </span><span class="number-literal">24</span><span>*</span><span class="identifier">n</span><span>).</span><span class="identifier">strokeColor</span><span>(</span><span class="type-name">Color</span><span>.</span><span class="identifier">red</span><span>)

</span><span class="keyword">val</span><span> </span><span class="identifier">redCircles</span><span>: </span><span class="type-name">Image</span><span> =
  </span><span class="identifier">concentricShapes</span><span>(</span><span class="number-literal">10</span><span>, </span><span class="identifier">redCircle</span><span> </span><span class="identifier">_</span><span>)</span></code></pre>
            <p><img src="./red-black-circles.svg" alt="Black and Red Concentric Circles" title="Figure Some(#fig:cycles:red-black-circles): caption"></p>
            <p>You might notice two things about this example: we&#39;re not using function composition, and we duplication in the definitions. 
            In both cases we draw circles, but they differ in color.
            No problem.
            This feels like a problem we can solve with function composition.
            Let&#39;s give it a go.</p>
            <p>In both cases the radius of the circle is <code>100 + 24*n</code>, where <code>n</code> is the iteration count.
            We can extract this into a function.</p>
            <pre><code class="nohighlight"><span class="keyword">val</span><span> </span><span class="identifier">size</span><span>: </span><span class="type-name">Int</span><span> =&gt; </span><span class="type-name">Int</span><span> = </span><span class="identifier">n</span><span> =&gt; </span><span class="number-literal">100</span><span> + </span><span class="number-literal">24</span><span>*</span><span class="identifier">n</span></code></pre>
            <p>Now we can build a function that creates a circle of size computed from <code>n</code>.</p>
            <pre><code class="nohighlight"><span class="keyword">val</span><span> </span><span class="identifier">circle</span><span>: </span><span class="type-name">Int</span><span> =&gt; </span><span class="type-name">Image</span><span> = </span><span class="identifier">size</span><span> =&gt; </span><span class="type-name">Image</span><span>.</span><span class="identifier">circle</span><span>(</span><span class="identifier">size</span><span>)</span></code></pre>
            <p>Now we just need a function that can change the stroke color.</p>
            <pre><code class="nohighlight"><span class="keyword">def</span><span> </span><span class="declaration-name">strokeColor</span><span>(</span><span class="identifier">color</span><span>: </span><span class="type-name">Color</span><span>): </span><span class="type-name">Image</span><span> =&gt; </span><span class="type-name">Image</span><span> =
  </span><span class="identifier">image</span><span> =&gt; </span><span class="identifier">image</span><span>.</span><span class="identifier">strokeColor</span><span>(</span><span class="identifier">color</span><span>)</span></code></pre>
            <p>With this we can construct the functions we need.</p>
            <pre><code class="nohighlight"><span class="keyword">val</span><span> </span><span class="identifier">blackCircle</span><span> = </span><span class="identifier">circle</span><span> </span><span class="comment">// Black is the default stroke
</span><span class="keyword">val</span><span> </span><span class="identifier">redCircle</span><span> = </span><span class="identifier">size</span><span>.</span><span class="identifier">andThen</span><span>(</span><span class="identifier">circle</span><span>).</span><span class="identifier">andThen</span><span>(</span><span class="identifier">strokeColor</span><span>(</span><span class="type-name">Color</span><span>.</span><span class="identifier">red</span><span>))</span></code></pre>
            <p>Using <code>andThen</code> is <em>a</em> way to compose functions, but not <em>the</em> only way to compose functions.
            We can write all sorts of functions that compose functions. 
            Sometimes we use the term <em>combinator</em> for a method or function whose job is to compose its parameters.
            For example, the <code>on</code>, <code>beside</code>, and <code>above</code> combinators compose <code>Images</code>.
            Here&#39;s an example of a function combinator that combines two <code>Int =&gt; Image</code> functions to produce another <code>Int =&gt; Image</code> function.</p>
            <pre><code class="nohighlight"><span class="keyword">def</span><span> </span><span class="declaration-name">withSizeOn</span><span>(</span><span class="identifier">f</span><span>: </span><span class="type-name">Int</span><span> =&gt; </span><span class="type-name">Image</span><span>, </span><span class="identifier">g</span><span>: </span><span class="type-name">Int</span><span> =&gt; </span><span class="type-name">Image</span><span>): </span><span class="type-name">Int</span><span> =&gt; </span><span class="type-name">Image</span><span> =
  </span><span class="identifier">size</span><span> =&gt; </span><span class="identifier">f</span><span>(</span><span class="identifier">size</span><span>).</span><span class="identifier">on</span><span>(</span><span class="identifier">g</span><span>(</span><span class="identifier">size</span><span>))</span></code></pre>
            <p>With this definition we can produce the image below.</p>
            <p><img src="./combinator.svg" alt="Using the `withSizeOn` combinator" title="Figure Some(#fig:cycles:combinator): caption"></p>
            <p>To create it we define a function to make a square given a size, and then compose it with our existing <code>circle</code> function as shown below.</p>
            <pre><code class="nohighlight"><span class="keyword">def</span><span> </span><span class="declaration-name">square</span><span>(</span><span class="identifier">n</span><span>: </span><span class="type-name">Int</span><span>): </span><span class="type-name">Image</span><span> =
  </span><span class="type-name">Image</span><span>.</span><span class="identifier">square</span><span>(</span><span class="identifier">n</span><span>)
  
</span><span class="identifier">concentricShapes</span><span>(
  </span><span class="number-literal">10</span><span>,
  </span><span class="identifier">size</span><span>
    .</span><span class="identifier">andThen</span><span>(</span><span class="identifier">withSizeOn</span><span>(</span><span class="identifier">circle</span><span>, </span><span class="identifier">square</span><span>))
    .</span><span class="identifier">andThen</span><span>(</span><span class="identifier">strokeColor</span><span>(</span><span class="type-name">Color</span><span>.</span><span class="identifier">royalBlue</span><span>))
)</span></code></pre>
            <div class="exercise">
              
              <h4 id="exercise-the-colour-and-the-shape">Exercise: The Colour and the Shape</h4>
              <p>Your mission is to write code to produce the image below.</p>
              <p><img src="./colors-and-shapes.svg" alt="Colors and Shapes" title="Figure Some(#fig:cycles:colors-and-shapes): caption"></p>
              <p>Let&#39;s think about the problem a little.
              We need to do two things:</p>
              <ol class="arabic">
                <li>write an appropriate definition of <code>singleShape</code> for each
                of the three shapes in the target image; and</li>
              </ol>
              <ol class="arabic">
                <li>call <code>concentricShapes</code> three times,
                passing in the appropriate definition of <code>singleShape</code> each time
                and putting the results <code>beside</code> one another.</li>
              </ol>
              <p>We also want to use function composition, 
              to create the definitions of <code>singleShape</code> from small, reusable components.</p>
              <p>The variation in the image comes from changing the shape and the color.
              For shapes we have circle, triangle, and square.
              The color changes by spinning the hue of the circle and square,
              and fading the color for the triangle.
              This suggests functions for each shape,
              and functions for each color manipulation.</p>
              <p>That&#39;s probably enough guidance.
              It&#39;s now over to you to finish up the code.</p>
            </div>
            <div class="solution">
              <div class="solution-body">
                <p>We can start with the basic functions for shapes we&#39;ve already used, and add a function for triangles.</p>
                <pre><code class="nohighlight"><span class="keyword">def</span><span> </span><span class="declaration-name">circle</span><span>(</span><span class="identifier">n</span><span>: </span><span class="type-name">Int</span><span>): </span><span class="type-name">Image</span><span> =
  </span><span class="type-name">Image</span><span>.</span><span class="identifier">circle</span><span>(</span><span class="identifier">n</span><span>)

</span><span class="keyword">def</span><span> </span><span class="declaration-name">square</span><span>(</span><span class="identifier">n</span><span>: </span><span class="type-name">Int</span><span>): </span><span class="type-name">Image</span><span> =
  </span><span class="type-name">Image</span><span>.</span><span class="identifier">square</span><span>(</span><span class="identifier">n</span><span>)

</span><span class="keyword">def</span><span> </span><span class="declaration-name">triangle</span><span>(</span><span class="identifier">n</span><span>: </span><span class="type-name">Int</span><span>): </span><span class="type-name">Image</span><span> =
  </span><span class="type-name">Image</span><span>.</span><span class="identifier">triangle</span><span>(</span><span class="identifier">n</span><span>, </span><span class="identifier">n</span><span>)</span></code></pre>
                <p>We also need functions that produce the color as a function of the iteration count.</p>
                <pre><code class="nohighlight"><span class="keyword">def</span><span> </span><span class="declaration-name">fading</span><span>(</span><span class="identifier">n</span><span>: </span><span class="type-name">Int</span><span>): </span><span class="type-name">Color</span><span> =
  </span><span class="type-name">Color</span><span>.</span><span class="identifier">blue</span><span>.</span><span class="identifier">fadeOut</span><span>((</span><span class="number-literal">1</span><span> - </span><span class="identifier">n</span><span> / </span><span class="number-literal">20.0</span><span>).</span><span class="identifier">normalized</span><span>)

</span><span class="keyword">def</span><span> </span><span class="declaration-name">spinning</span><span>(</span><span class="identifier">n</span><span>: </span><span class="type-name">Int</span><span>): </span><span class="type-name">Color</span><span> =
  </span><span class="type-name">Color</span><span>.</span><span class="identifier">blue</span><span>.</span><span class="identifier">desaturate</span><span>(</span><span class="number-literal">0.5</span><span>.</span><span class="identifier">normalized</span><span>).</span><span class="identifier">spin</span><span>((</span><span class="identifier">n</span><span> * </span><span class="number-literal">30</span><span>).</span><span class="identifier">degrees</span><span>)</span></code></pre>
                <p>Now we need to put these functions together. 
                We have one group of functions of type <code>Int =&gt; Image</code> and another with type <code>Int =&gt; Color</code>.
                We cannot compose these with <code>andThen</code> as the types don&#39;t work out.
                However we can create our own combinator that does what we want.</p>
                <pre><code class="nohighlight"><span class="keyword">def</span><span> </span><span class="declaration-name">colored</span><span>(</span><span class="identifier">shape</span><span>: </span><span class="type-name">Int</span><span> =&gt; </span><span class="type-name">Image</span><span>, </span><span class="identifier">color</span><span>: </span><span class="type-name">Int</span><span> =&gt; </span><span class="type-name">Color</span><span>): </span><span class="type-name">Int</span><span> =&gt; </span><span class="type-name">Image</span><span> =
  (</span><span class="identifier">n</span><span>: </span><span class="type-name">Int</span><span>) =&gt; </span><span class="identifier">shape</span><span>(</span><span class="identifier">n</span><span>).</span><span class="identifier">strokeWidth</span><span>(</span><span class="number-literal">10</span><span>).</span><span class="identifier">strokeColor</span><span>(</span><span class="identifier">color</span><span>(</span><span class="identifier">n</span><span>))</span></code></pre>
                <p>Putting it all together gets us the output we want.</p>
                <pre><code class="nohighlight"><span class="identifier">concentricShapes</span><span>(</span><span class="number-literal">10</span><span>, </span><span class="identifier">colored</span><span>(</span><span class="identifier">size</span><span>.</span><span class="identifier">andThen</span><span>(</span><span class="identifier">circle</span><span>), </span><span class="identifier">spinning</span><span>))
  .</span><span class="identifier">beside</span><span>(
    </span><span class="identifier">concentricShapes</span><span>(</span><span class="number-literal">10</span><span>, </span><span class="identifier">colored</span><span>(</span><span class="identifier">size</span><span>.</span><span class="identifier">andThen</span><span>(</span><span class="identifier">triangle</span><span>), </span><span class="identifier">fading</span><span>))
      .</span><span class="identifier">beside</span><span>(</span><span class="identifier">concentricShapes</span><span>(</span><span class="number-literal">10</span><span>, </span><span class="identifier">colored</span><span>(</span><span class="identifier">size</span><span>.</span><span class="identifier">andThen</span><span>(</span><span class="identifier">square</span><span>), </span><span class="identifier">spinning</span><span>)))
  )</span></code></pre>
              </div>
            </div>
            <div class="exercise">
              
              <h4 id="exercise-more-shapes">Exercise: More Shapes</h4>
              <p>The <code>concentricShapes</code> methods takes an <code>Int =&gt; Image</code> function. We can make a function with this type using <code>drawCurve</code>, the parametric curves we created earlier, and the various utilities we have created along the way. There is an example below.</p>
              <p><img src="./concentric-dotty-circle.svg" alt="Concentric dotty circles" title="Figure Some(#fig:cycles:concentric-dotty-circle): caption"></p>
              <p>The code to create this is below.</p>
              <pre><code class="nohighlight"><span class="keyword">def</span><span> </span><span class="declaration-name">dottyCircle</span><span>(</span><span class="identifier">n</span><span>: </span><span class="type-name">Int</span><span>): </span><span class="type-name">Image</span><span> =
  </span><span class="identifier">drawCurve</span><span>(
    </span><span class="number-literal">72</span><span>,
    </span><span class="identifier">parametricCircle</span><span>.</span><span class="identifier">andThen</span><span>(</span><span class="identifier">scale</span><span>(</span><span class="number-literal">100</span><span> + </span><span class="identifier">n</span><span> * </span><span class="number-literal">24</span><span>)).</span><span class="identifier">andThen</span><span>(</span><span class="identifier">growingDot</span><span>)
  )

</span><span class="identifier">concentricShapes</span><span>(</span><span class="number-literal">10</span><span>, </span><span class="identifier">colored</span><span>(</span><span class="identifier">dottyCircle</span><span>, </span><span class="identifier">spinning</span><span>))</span></code></pre>
              <p>Use the techniques we&#39;ve seen so far to create a picture of your choosing (perhaps using the flowers we have seen earlier). No solution here; there is no right or wrong answer.</p>
            </div>
            <div class="flex flex-row justify-between">
                <a class="pageNavigation" href="composition.html">←Function Composition</a> <a class="pageNavigation" href="interpolation.html">Interpolation→</a>
            </div>
        </main>
        <footer>Creative Scala is copyright Noel Welsh</footer>
    </div>

    </div>
</body>

</html>
