<!doctype html>
<html lang="">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Laika 0.19.0" />
    <title>Match Expressions</title>
    
    
    <meta name="description" content="creative-scala" />
    
    <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400|Source+Sans+Pro:300,400,600"
        rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Crimson+Pro:400" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="../creative-scala.css" />
    <script> /* for avoiding page load transitions */</script>
</head>

<body>
    <nav id="topbar"><p><a href="natural-numbers.html">←</a></p>
<p><a href="../../">Creative Scala: Form and Function</a></p>
<p><a href="substitution.html">→</a></p></nav>
    <nav id="sidebar">
        <ul class="nav-list">
          <li class="level1 nav-leaf"><a href="../">Creative Scala: Form and Function</a></li>
          <li class="level1 nav-leaf"><a href="../foreword-1.html">Foreword to the First Edition</a></li>
          <li class="level1 nav-leaf"><a href="../foreword-2.html">Foreword to the Second Edition</a></li>
          <li class="level1 nav-node"><a href="../setup/">Getting Started</a></li>
          <li class="level2 nav-leaf"><a href="../setup/background.html">Background</a></li>
          <li class="level2 nav-leaf"><a href="../setup/terminal.html">Installing Terminal Software and a Text Editor</a></li>
          <li class="level2 nav-leaf"><a href="../setup/github.html">GitHub</a></li>
          <li class="level2 nav-leaf"><a href="../setup/intellij.html">IntelliJ</a></li>
          <li class="level2 nav-leaf"><a href="../setup/">Setup</a></li>
          <li class="level1 nav-node"><a href="../expressions/">Expressions, Values, and Types</a></li>
          <li class="level2 nav-leaf"><a href="../expressions/02-starting.html">Starting to Program</a></li>
          <li class="level2 nav-leaf"><a href="../expressions/03-expressions.html">Expressions and Values</a></li>
          <li class="level2 nav-leaf"><a href="../expressions/04-types.html">Types</a></li>
          <li class="level2 nav-leaf"><a href="../expressions/05-exercises.html">Exercises</a></li>
          <li class="level2 nav-leaf"><a href="../expressions/06-summary.html">Summary</a></li>
          <li class="level1 nav-node"><a href="../expanding-expressions/">Expanding Expressions</a></li>
          <li class="level2 nav-leaf"><a href="../expanding-expressions/02-literals.html">Literal Expressions</a></li>
          <li class="level2 nav-leaf"><a href="../expanding-expressions/03-objects.html">Values are Objects</a></li>
          <li class="level2 nav-leaf"><a href="../expanding-expressions/04-types.html">Types</a></li>
          <li class="level2 nav-leaf"><a href="../expanding-expressions/exercises.html">Exercises</a></li>
          <li class="level2 nav-leaf"><a href="../expanding-expressions/04-images.html">Images</a></li>
          <li class="level1 nav-node"><a href="../expressive-expressions/">Expressive Expressions</a></li>
          <li class="level2 nav-leaf"><a href="../expressive-expressions/02-layout.html">Layout</a></li>
          <li class="level2 nav-leaf"><a href="../expressive-expressions/03-color.html">Color</a></li>
          <li class="level2 nav-leaf"><a href="../expressive-expressions/04-creating-color.html">Creating Colors</a></li>
          <li class="level1 nav-node"><a href="../substitution/">The Substitution Model of Evaluation</a></li>
          <li class="level2 nav-leaf"><a href="../substitution/substitution.html">Substitution</a></li>
          <li class="level2 nav-leaf"><a href="../substitution/order.html">Order of Evaluation</a></li>
          <li class="level2 nav-leaf"><a href="../substitution/local-reasoning.html">Local Reasoning</a></li>
          <li class="level1 nav-node"><a href="../methods/">Methods without Madness</a></li>
          <li class="level2 nav-leaf"><a href="../methods/methods.html">Methods</a></li>
          <li class="level2 nav-leaf"><a href="../methods/syntax.html">Method Syntax</a></li>
          <li class="level2 nav-leaf"><a href="../methods/semantics.html">Method Semantics</a></li>
          <li class="level2 nav-leaf"><a href="../methods/writing-methods.html">Writing Methods</a></li>
          <li class="level2 nav-leaf"><a href="../methods/conclusions.html">Conclusions</a></li>
          <li class="level1 nav-node"><a href="index.html">Structural Recursion over the Natural Numbers</a></li>
          <li class="level2 nav-leaf"><a href="boxes.html">A Line of Boxes</a></li>
          <li class="level2 nav-leaf"><a href="natural-numbers.html">The Natural Numbers</a></li>
          <li class="level2 active nav-leaf"><a href="#">Match Expressions</a></li>
          <li class="level2 nav-leaf"><a href="substitution.html">Reasoning about Recursion</a></li>
          <li class="level2 nav-leaf"><a href="conclusions.html">Conclusions</a></li>
          <li class="level1 nav-node"><a href="../fractals/">Fractals</a></li>
          <li class="level2 nav-leaf"><a href="../fractals/fractals.html">The Chessboard</a></li>
          <li class="level2 nav-leaf"><a href="../fractals/nested-methods.html">Nested Methods</a></li>
          <li class="level2 nav-leaf"><a href="../fractals/auxillary-parameter.html">Auxiliary Parameters</a></li>
          <li class="level2 nav-leaf"><a href="../fractals/exercises.html">Exercises</a></li>
          <li class="level1 nav-header">turtles</li>
          <li class="level2 nav-leaf"><a href="../turtles/">Turtle Algebra and Algebraic Data Types</a></li>
          <li class="level2 nav-leaf"><a href="../turtles/turtles.html">Controlling the Turtle</a></li>
          <li class="level2 nav-leaf"><a href="../turtles/exercises.html">Exercises</a></li>
          <li class="level2 nav-leaf"><a href="../turtles/branching.html">Branching Structures</a></li>
          <li class="level1 nav-leaf"><a href="../solutions.html">Solutions to Exercises {#solutions}</a></li>
          <li class="level1 nav-header">generative</li>
          <li class="level2 nav-leaf"><a href="../generative/">Composition of Generative Art</a></li>
          <li class="level2 nav-leaf"><a href="../generative/generative.html">Generative Art</a></li>
          <li class="level2 nav-leaf"><a href="../generative/product.html">Combining Random Values</a></li>
          <li class="level2 nav-leaf"><a href="../generative/exercises.html">Exercises</a></li>
          <li class="level2 nav-leaf"><a href="../generative/for.html">For Comprehensions</a></li>
          <li class="level2 nav-leaf"><a href="../generative/api.html">Exploring Random</a></li>
          <li class="level2 nav-leaf"><a href="../generative/random.html">Randomness without Effect</a></li>
          <li class="level2 nav-leaf"><a href="../generative/flatmap.html">Combining Random Values</a></li>
          <li class="level1 nav-header">adt</li>
          <li class="level2 nav-leaf"><a href="../adt/">Algebraic Data Types To Call Our Own</a></li>
          <li class="level2 nav-leaf"><a href="../adt/turtle.html">Build Your Own Turtle</a></li>
          <li class="level2 nav-leaf"><a href="../adt/adt.html">Algebraic Data Types</a></li>
          <li class="level1 nav-header">declarations</li>
          <li class="level2 nav-leaf"><a href="../declarations/">Declarations</a></li>
          <li class="level2 nav-leaf"><a href="../declarations/color-palette.html">Extended Exercise: Color Palettes</a></li>
          <li class="level2 nav-leaf"><a href="../declarations/method-declarations.html">Method Declarations</a></li>
          <li class="level2 nav-leaf"><a href="../declarations/take-home-points.html">Take Home Points</a></li>
          <li class="level2 nav-leaf"><a href="../declarations/value-declarations.html">Value Declarations</a></li>
          <li class="level1 nav-header">sequences</li>
          <li class="level2 nav-leaf"><a href="../sequences/">Shapes, Sequences, and Stars</a></li>
          <li class="level2 nav-leaf"><a href="../sequences/lists.html">Working with Lists</a></li>
          <li class="level2 nav-leaf"><a href="../sequences/paths.html">Paths</a></li>
          <li class="level2 nav-leaf"><a href="../sequences/map.html">Transforming Sequences</a></li>
          <li class="level2 nav-leaf"><a href="../sequences/stars.html">My God, It&#39;s Full of Stars!</a></li>
          <li class="level1 nav-header">data</li>
          <li class="level2 nav-leaf"><a href="../data/">Creating and Working With Data</a></li>
          <li class="level2 nav-leaf"><a href="../data/case-classes.html">Case Classes</a></li>
          <li class="level2 nav-leaf"><a href="../data/data.html">Data</a></li>
          <li class="level1 nav-header">summary</li>
          <li class="level2 nav-leaf"><a href="../summary/">Summary</a></li>
          <li class="level1 nav-header">fp</li>
          <li class="level2 nav-leaf"><a href="../fp/">(Functional) Programming</a></li>
          <li class="level2 nav-leaf"><a href="../fp/functions.html">Functions as Values</a></li>
          <li class="level2 nav-leaf"><a href="../fp/take-home-points.html">Take Home Points</a></li>
          <li class="level2 nav-leaf"><a href="../fp/recursion.html">Recursive Algorithms</a></li>
          <li class="level1 nav-header">programs</li>
          <li class="level2 nav-leaf"><a href="../programs/">Writing Larger Programs</a></li>
          <li class="level2 nav-leaf"><a href="../programs/console.html">Working Within the Console</a></li>
          <li class="level2 nav-leaf"><a href="../programs/outside-console.html">Coding Outside the Console</a></li>
          <li class="level2 nav-leaf"><a href="../programs/imports.html">Packages and Imports</a></li>
          <li class="level2 nav-leaf"><a href="../programs/abstraction.html">Abstraction</a></li>
          <li class="level2 nav-leaf"><a href="../programs/names.html">Names</a></li>
          <li class="level1 nav-header">quickreference</li>
          <li class="level2 nav-leaf"><a href="../quickreference/">Syntax Quick Reference {#syntax-quick-reference}</a></li>
          <li class="level1 nav-header">hof</li>
          <li class="level2 nav-leaf"><a href="../hof/">Horticulture and Higher-order Functions</a></li>
          <li class="level2 nav-leaf"><a href="../hof/exercises.html">Exercises</a></li>
          <li class="level2 nav-leaf"><a href="../hof/parametric-curves.html">Parametric Curves</a></li>
          <li class="level2 nav-leaf"><a href="../hof/conclusions.html">Conclusions</a></li>
          <li class="level2 nav-leaf"><a href="../hof/functions.html">Functions</a></li>
          <li class="level2 nav-leaf"><a href="../hof/flowers.html">Flowers and Other Curves</a></li>
          <li class="level2 nav-leaf"><a href="../hof/hof.html">Higher Order Methods and Functions</a></li>
          <li class="level1 nav-leaf"><a href="../intro.html">Introduction</a></li>
          <li class="level1 nav-header">animation</li>
          <li class="level2 nav-leaf"><a href="../animation/">Animation and Fireworks</a></li>
          <li class="level2 nav-leaf"><a href="../animation/reactor.html">Reactors</a></li>
          <li class="level2 nav-leaf"><a href="../animation/easing.html">Easing Functions</a></li>
          <li class="level1 nav-leaf"><a href="../links.html">links.md</a></li>
          <li class="level1 nav-header">collections</li>
          <li class="level2 nav-leaf"><a href="../collections/">Collections {#collections}</a></li>
          <li class="level2 nav-leaf"><a href="../collections/transform.html">Transforming Sequences</a></li>
          <li class="level2 nav-leaf"><a href="../collections/paths.html">Drawing Paths</a></li>
          <li class="level2 nav-leaf"><a href="../collections/take-home-points.html">Take Home Points</a></li>
          <li class="level2 nav-leaf"><a href="../collections/create.html">Creating Sequences</a></li>
        </ul>
    </nav>

    <div id="content">
        <main class="content">
            <h1 id="match-expressions" class="title">Match Expressions</h1>
            <p>In the previous section we saw the <code>match</code> expression</p>
            <pre><code class="nohighlight"><span class="identifier">count</span><span> </span><span class="keyword">match</span><span> {
  </span><span class="keyword">case</span><span> </span><span class="number-literal">0</span><span> =&gt; </span><span class="type-name">Image</span><span>.</span><span class="identifier">empty</span><span>
  </span><span class="keyword">case</span><span> </span><span class="identifier">n</span><span> =&gt; </span><span class="identifier">aBox</span><span>.</span><span class="identifier">beside</span><span>(</span><span class="identifier">boxes</span><span>(</span><span class="identifier">n</span><span>-</span><span class="number-literal">1</span><span>))
}</span></code></pre>
            <p>How are we to understand this new kind of expression,
            and write our own?
            Let&#39;s break it down.</p>
            <p>The very first thing to say is that <code>match</code> is indeed an expression,
            which means it evaluates to a value.
            If it didn&#39;t, the <code>boxes</code> method would not work!</p>
            <p>To understand what it evaluates to we need more detail.
            A <code>match</code> expression in general has the shape</p>
            <pre><code class="nohighlight"><span>&lt;</span><span class="identifier">anExpression</span><span>&gt; </span><span class="keyword">match</span><span> {
  </span><span class="keyword">case</span><span> &lt;</span><span class="identifier">pattern1</span><span>&gt; =&gt; &lt;</span><span class="identifier">expression1</span><span>&gt;
  </span><span class="keyword">case</span><span> &lt;</span><span class="identifier">pattern2</span><span>&gt; =&gt; &lt;</span><span class="identifier">expression2</span><span>&gt;
  </span><span class="keyword">case</span><span> &lt;</span><span class="identifier">pattern3</span><span>&gt; =&gt; &lt;</span><span class="identifier">expression3</span><span>&gt;
  ...
}</span></code></pre>
            <p><code>&lt;anExpression&gt;</code>, concretely <code>count</code> in the case above, is the expression that evaluates to the value we&#39;re trying to match against the patterns.
            The patterns <code>&lt;pattern1&gt;</code> and so on are tried in order from top to bottom.
            The right-hand side expression, <code>&lt;expression1&gt;</code> and so on, of the first matching pattern is evaluated, and the overall result is the result of the right-hand side expression that is evaluated.
            So far we&#39;ve seen two kinds of patterns:</p>
            <ul>
              <li>a literal (as in <code>case 0</code>) which matches exactly the value that literal evaluates to; and</li>
            </ul>
            <ul>
              <li>a wildcard (as in <code>case n</code>) which matches <em>anything</em>, and introduces a binding within the right-hand side expression.</li>
            </ul>
            <p>Finally, the right-hand side expressions, <code>&lt;expression1&gt;</code> and so on, are just expressions like any other we&#39;ve written so far.
            The entire <code>match</code> expression evaluates to the value of the right-hand side expression of the <em>first</em> pattern that matches.
            So when we call <code>boxes(0)</code> both patterns will match (because the wildcard matches anything), but because the literal pattern comes first the expression <code>Image.empty</code> is the one that is evaluated.</p>
            <p>A <code>match</code> expression that checks for all possible cases is called an exhaustive match.
            If we can assume that <code>count</code> is always greater or equal to zero, the <code>match</code> in <code>boxes</code> is exhaustive.</p>
            <p>Once we&#39;re comfortable with <code>match</code> expressions we need to look at the structure of the natural numbers before we can explain structural recursion over them.</p>
            
            <h3 id="exercises" class="section">Exercises {-}</h3>
            
            <h4 id="guess-the-result" class="section">Guess the Result {-}</h4>
            <p>Let&#39;s check our understanding of match by guessing what each of the following expressions evaluates to, and why.</p>
            <pre><code class="nohighlight"><span class="string-literal">&quot;abcd&quot;</span><span> </span><span class="keyword">match</span><span> {
  </span><span class="keyword">case</span><span> </span><span class="string-literal">&quot;bcde&quot;</span><span> =&gt; </span><span class="number-literal">0</span><span>
  </span><span class="keyword">case</span><span> </span><span class="string-literal">&quot;cdef&quot;</span><span> =&gt; </span><span class="number-literal">1</span><span>
  </span><span class="keyword">case</span><span> </span><span class="string-literal">&quot;abcd&quot;</span><span> =&gt; </span><span class="number-literal">2</span><span>
}</span></code></pre>
            <pre><code class="nohighlight"><span class="number-literal">1</span><span> </span><span class="keyword">match</span><span> {
  </span><span class="keyword">case</span><span> </span><span class="number-literal">0</span><span> =&gt; </span><span class="string-literal">&quot;zero&quot;</span><span>
  </span><span class="keyword">case</span><span> </span><span class="number-literal">1</span><span> =&gt; </span><span class="string-literal">&quot;one&quot;</span><span>
  </span><span class="keyword">case</span><span> </span><span class="number-literal">1</span><span> =&gt; </span><span class="string-literal">&quot;two&quot;</span><span>
}</span></code></pre>
            <pre><code class="nohighlight"><span class="number-literal">1</span><span> </span><span class="keyword">match</span><span> {
  </span><span class="keyword">case</span><span> </span><span class="identifier">n</span><span> =&gt; </span><span class="identifier">n</span><span> + </span><span class="number-literal">1</span><span>
  </span><span class="keyword">case</span><span> </span><span class="number-literal">1</span><span> =&gt; </span><span class="number-literal">1000</span><span>
}</span></code></pre>
            <pre><code class="nohighlight"><span class="number-literal">1</span><span> </span><span class="keyword">match</span><span> {
  </span><span class="keyword">case</span><span> </span><span class="identifier">a</span><span> =&gt; </span><span class="identifier">a</span><span>
  </span><span class="keyword">case</span><span> </span><span class="identifier">b</span><span> =&gt; </span><span class="identifier">b</span><span> + </span><span class="number-literal">1</span><span>
  </span><span class="keyword">case</span><span> </span><span class="identifier">c</span><span> =&gt; </span><span class="identifier">c</span><span> * </span><span class="number-literal">2</span><span>
}</span></code></pre>
            <p>&lt;div class=&quot;solution&quot;&gt;</p>
            <p>The first example evaluates to <code>2</code>, as the pattern <code>&quot;abcd&quot;</code> is the only match for the literal <code>&quot;abcd&quot;</code> amongst the patterns.</p>
            <p>The second example evaluates to <code>&quot;one&quot;</code>, because the first matching case is the one that is evaluated.</p>
            <p>The third example evaluates to <code>2</code>, because <code>case n</code> defines a wildcard pattern that matches anything.</p>
            <p>The final example evaluates to <code>1</code> because the first matching case is evaluated.
            &lt;/div&gt;</p>
            
            <h4 id="no-match" class="section">No Match {-}</h4>
            <p>What happens if no pattern matches in a <code>match</code> expression?
            Take a guess, then write a <code>match</code> expression that fails to match and see if you managed to guess correctly.
            (At this point we have no reason to expect any particular behavior so any reasonable guess will do.)</p>
            <p>&lt;div class=&quot;solution&quot;&gt;
            Here are three reasonable possibilities I can think of; perhaps you came up with something else?</p>
            <ul>
              <li>The expression could evaluate to some default, like <code>Image.empty</code> (but how should Scala pick the right default?)</li>
            </ul>
            <ul>
              <li>The Scala compiler should just not let you write code like that.</li>
            </ul>
            <ul>
              <li>The <code>match</code> expression will fail at runtime.</li>
            </ul>
            <p>Here&#39;s a match expression that doesn&#39;t match.</p>
            <pre><code class="nohighlight"><span class="number-literal">2</span><span> </span><span class="keyword">match</span><span> {
  </span><span class="keyword">case</span><span> </span><span class="number-literal">0</span><span> =&gt; </span><span class="string-literal">&quot;zero&quot;</span><span>
  </span><span class="keyword">case</span><span> </span><span class="number-literal">1</span><span> =&gt; </span><span class="string-literal">&quot;one&quot;</span><span>
}
</span><span class="comment">// scala.MatchError: 2 (of class java.lang.Integer)
// 	at repl.MdocSession$MdocApp.$init$$$anonfun$1(match.md:34)</span></code></pre>
            <p>The correct answer is one of the last two possibilities, failing to compile or failing at runtime.
            In this example we have an error at runtime.
            The exact answer depends on how Scala is configured (we can tell the compiler to refuse to compile matches that it can show are not exhaustive, but this is not the default behavior).
            &lt;/div&gt;</p>
            <p class="nextPage"><a href="substitution.html">Reasoning about Recursion→</a></p>
        </main>
        <footer>Creative Scala is copyright Noel Welsh</footer>
    </div>

    </div>
</body>

</html>